#!name = é‡å†™å»å¹¿å‘Š
#!desc = æœ¬åœ°é‡å†™

[Rule]
#è¤çŸ³äº‘è§†é¢‘ ğŸ”½
DOMAIN,ecapi-flood.ys7.com,REJECT-DROP

[URL Rewrite]
#è¤çŸ³äº‘è§†é¢‘ ğŸ”½
^https:\/\/api\.ys7\.com\/api\/ads\/v2.* - reject
^https:\/\/api\.ys7\.com\/v3\/adService\/sdkConfig\/query$ - reject
^https:\/\/api\.ys7\.com\/api\/ads\/query\/adConfig\?.* - reject
# å‘ç° > ç›´æ’­ > æº¯æº
^https:\/\/api\.ys7\.com\/v3\/videoclips\/live\/goodsModule\/query.* - reject
# å°é¢
^https:\/\/api\.ys7\.com\/v3\/ad\/data\/report\/statistics\?.* - reject


#çˆ±æ€åŠ©æ‰‹ ğŸ”½
^https:\/\/list-app-m\.i4\.cn\/adclickcb\.xhtml$ - REJECT-DROP
^https:\/\/list-app-m\.i4\.cn\/getopfstadinfo\.xhtml$ - REJECT-DROP


[Body Rewrite]
# è¤çŸ³äº‘è§†é¢‘ ğŸ”½
# å‘ç° > èŒå® &é“¶é¾„
http-response-jq ^https:\/\/api\.ys7\.com\/v3\/videoclips\/ignore_uri\/flow\/data\/list\?.* ".data={}"
# å•†åŸé¡µé¢
http-response-jq ^https:\/\/m\.ys7\.com\/default\/rn-index\?.* ".data["tabs"][].data=[] | .data["page"][].data[].data"
# è¤ç²‰åœˆé¡µé¢
http-response-jq ^https:\/\/m\.ys7\.com\/smart\-content\-play.* ".data=[]"
http-response-jq ^https:\/\/m-api\.ezsuperfans\.com\/v2\/smart-content-play\/.* â€œ{}â€

# ç›´æ’­ > å® ç‰©é¡µé¢
http-response-jq ^https:\/\/api\.ys7\.com\/v3\/videoclips\/live\/type\/list\/v2.* ".data={}"
# çŸ¥è¯†é¡µé¢
http-response-jq ^https:\/\/api\.ys7\.com/v3/videoclips/ignore\_uri\/knowledge\/module\/query.* ".data.moduleList=[] | .data.total=0"
# æˆ‘çš„é¡µé¢ > åªæ˜¾ç¤ºç®¡ç†ä¸­å¿ƒ
http-response-jq ^https?\:\/\/api\.ys7\.com\/v3\/valueadded\/operation\/config\/master\/station.* ".stationInfo.groupList = [.stationInfo.groupList[0]]"
# æˆ‘çš„é¡µé¢ > ç”¨æˆ·ä¼šå‘˜
http-response-jq ^https?:\/\/api\.ys7\.com\/v3\/config\/service\/entrance\/bannerInfo.* ".bannerInfo.list = []"
# æ€»é…ç½®
# http-response-jq ^https?:\/\/api.ys7.com\/v3\/configurations\/gray\/info.+ ".grayConfigInfos.83.switchStatus=3"

[Map Local]


[MITM]
hostname = %APPEND% list-app-m.i4.cn, api.ys7.com, m.ys7.com, m-api.ezsuperfans.com
